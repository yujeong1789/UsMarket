<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mybatis.mapper.admin">

	<select id="searchAdmin" parameterType="map" resultType="map">
		SELECT admin_no, admin_id, admin_name FROM admin 
		WHERE admin_id = #{admin_id} AND admin_password = #{admin_password}
	</select>
	
	<select id="searchMemberStatsByDate" parameterType="adminSearchCondition" resultType="map">
		SELECT *
		FROM member_stats_date
		WHERE TO_DATE("DATE", 'YYYY-MM-DD') BETWEEN TO_DATE(#{startDate}, 'YYYY-MM-DD') AND TO_DATE(#{endDate}, 'YYYY-MM-DD')
	</select>
	
	<select id="searchMemberStatsByMonth" parameterType="adminSearchCondition" resultType="map">
		SELECT *
		FROM member_stats_month
		WHERE TO_DATE("DATE", 'YYYY-MM') BETWEEN TO_DATE(#{startDate}, 'YYYY-MM-DD') AND TO_DATE(#{endDate}, 'YYYY-MM-DD')
	</select>
	
	<select id="searchDealStatsByDate" parameterType="adminSearchCondition" resultType="map">
		SELECT *
		FROM deal_stats_date
		WHERE TO_DATE(day, 'YYYY-MM-DD') BETWEEN TO_DATE(#{startDate}, 'YYYY-MM-DD') AND TO_DATE(#{endDate}, 'YYYY-MM-DD')
	</select>
	
	<select id="searchDealStatsByMonth" parameterType="adminSearchCondition" resultType="map">
		SELECT *
		FROM deal_stats_month
		WHERE TO_DATE(day, 'YYYY-MM') BETWEEN TO_DATE(#{startDate}, 'YYYY-MM-DD') AND TO_DATE(#{endDate}, 'YYYY-MM-DD')
	</select>
	

	
	
	<select id="searchReportList" parameterType="map" resultType="map">
		SELECT *
		FROM ( SELECT rownum AS num, A.*
				FROM (	SELECT r.report_no, r.report_regdate, r.report_complete
							,( SELECT c1.report_category1_name FROM report_category1 c1
							   WHERE c1.report_category1_no = r.report_category1_no
							 )||' | '||
							 ( SELECT c2.report_category2_name FROM report_category2 c2
							   WHERE c2.report_category1_no = r.report_category1_no AND c2.report_category2_no = r.report_category2_no
							 ) AS report_title
						FROM report r
						ORDER BY report_regdate DESC
					 ) A
			 )
		WHERE num BETWEEN #{startPage} AND #{endPage}
	</select>
	
	
	<select id="searchQnaList" parameterType="map" resultType="map">
		SELECT *
		FROM ( SELECT rownum AS num, A.*
				FROM (	SELECT qna_no, qna_title, qna_complete, qna_regdate
						FROM qna
						ORDER BY qna_regdate DESC
					 ) A
			 )
		WHERE num BETWEEN #{startPage} AND #{endPage}
	</select>
</mapper>